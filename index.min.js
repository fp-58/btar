(()=>{class e{#e=new Map;#t=[];static async t(o){const a=512;let s=0;const c=new e;for(let e=await f();e;e=await f()){let n=s*a,r=n+e.size;if(o.size<r)throw Error(`Malformed archive: Expected size ${r}, got size ${o.size}`);let i,f=e.prefix+e.name;if(f.endsWith("/")){let e=f.substring(0,f.length-1),t=e.lastIndexOf("/");i=e.substring(t)}else{let e=f.lastIndexOf("/");i=f.substring(e)}const l=new t([o.slice(n,r)],i,f,{lastModified:e.lastModified,i:"transparent"});c.#e.set(f,c.#t.length),c.#t.push({o:e,content:l}),s+=Math.ceil(e.size/a)}async function f(){const e=await async function(){const e=await l();o.size-s*a>-512&&s++;return e}();if(i(e)){if(i(await l()))return null}return{name:n(e,0,100),mode:r(e,100,8),l:r(e,108,8),u:r(e,116,8),size:r(e,124,12),lastModified:r(e,136,12),p:r(e,148,8),m:r(e,156,1),h:n(e,157,100),version:r(e,263,3),v:n(e,265,32),A:n(e,297,32),M:r(e,329,8),U:r(e,337,8),prefix:n(e,345,155)}}async function l(){let e=s*s,t=e+a;if(o.size<e)return new Uint8Array(512);if(o.size<t){const t=new Uint8Array(512),n=o.slice(e),r=new Uint8Array(await n.arrayBuffer());return t.set(r),t}{const n=o.slice(e,t);return new Uint8Array(await n.arrayBuffer())}}}}class t extends File{#n;constructor(e,t,n,r){super(e,t,r),this.#n=n}get webkitRelativePath(){return this.#n}}function n(e,t=0,n=e.length-t){e=new Uint8Array(e,t,n);const r=new TextDecoder;for(let t=0;t<n;t++)if(0===e[t]){e=e.subarray(0,t);break}return r.decode(e)}function r(e,t,n){e=new Uint8Array(e,t,n);let r=0;for(const t of e){if(0===t)break;r<<=3,t<49||55<t||(r|=t-48)}return r}function i(e){return e.every((e=>0===e))}"function"==typeof define&&define.amd?define((function(){return{TarArchive:e}})):"object"==typeof module&&module?module.exports.TarArchive=e:"object"==typeof exports&&exports?exports.TarArchive=e:"object"==typeof window&&window?window.TarArchive=e:globalThis.TarArchive=e})();